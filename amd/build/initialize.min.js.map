{"version":3,"sources":["../src/initialize.js"],"names":["define","$","notification","str","init","starttime","endtime","mode","start","Date","end","endenabled","length","last","selectedIndex","getMinutes","getHours","getDate","getMonth","getFullYear","disabled","document","on","checked","get_strings","component","done","s","confirm","prop","val"],"mappings":"AAAAA,OAAM,gCAAC,CAAC,QAAD,CAAW,mBAAX,CAAgC,UAAhC,CAAD,CAA8C,SAAUC,CAAV,CAAaC,CAAb,CAA2BC,CAA3B,CAAgC,CA6HhF,MAAO,CACHC,IAAI,CA7HG,QAAPA,CAAAA,IAAO,CAASC,CAAT,CAAoBC,CAApB,CAA6BC,CAA7B,CAAmC,IACtCC,CAAAA,CAAK,CAAG,GAAIC,CAAAA,IAAJ,CAAqB,GAAZ,CAAAJ,CAAT,CAD8B,CAEtCK,CAAG,CAAG,GAAID,CAAAA,IAAJ,CAAmB,GAAV,CAAAH,CAAT,CAFgC,CAGtCK,CAHsC,CAI1C,GAAuC,CAAnC,EAAAV,CAAC,CAAC,qBAAD,CAAD,CAAyBW,MAA7B,CAA0C,CAEtC,MACH,CACDX,CAAC,CAAC,qBAAD,CAAD,CAAyBY,IAAzB,GAAgC,CAAhC,EAAmCC,aAAnC,CAAmDN,CAAK,CAACO,UAAN,EAAnD,CACAd,CAAC,CAAC,mBAAD,CAAD,CAAuBY,IAAvB,GAA8B,CAA9B,EAAiCC,aAAjC,CAAiDN,CAAK,CAACQ,QAAN,EAAjD,CACAf,CAAC,CAAC,kBAAD,CAAD,CAAsBY,IAAtB,GAA6B,CAA7B,EAAgCC,aAAhC,CAAgDN,CAAK,CAACS,OAAN,GAAkB,CAAlE,CACAhB,CAAC,CAAC,oBAAD,CAAD,CAAwBY,IAAxB,GAA+B,CAA/B,EAAkCC,aAAlC,CAAkDN,CAAK,CAACU,QAAN,EAAlD,CACAjB,CAAC,CAAC,mBAAD,CAAD,CAAuBY,IAAvB,GAA8B,CAA9B,EAAiCC,aAAjC,CAAiDN,CAAK,CAACW,WAAN,GAAsB,GAAvE,CAEAlB,CAAC,CAAC,mBAAD,CAAD,CAAuBY,IAAvB,GAA8B,CAA9B,EAAiCC,aAAjC,CAAiDJ,CAAG,CAACK,UAAJ,EAAjD,CACAd,CAAC,CAAC,iBAAD,CAAD,CAAqBY,IAArB,GAA4B,CAA5B,EAA+BC,aAA/B,CAA+CJ,CAAG,CAACM,QAAJ,EAA/C,CACAf,CAAC,CAAC,gBAAD,CAAD,CAAoBY,IAApB,GAA2B,CAA3B,EAA8BC,aAA9B,CAA8CJ,CAAG,CAACO,OAAJ,GAAgB,CAA9D,CACAhB,CAAC,CAAC,kBAAD,CAAD,CAAsBY,IAAtB,GAA6B,CAA7B,EAAgCC,aAAhC,CAAgDJ,CAAG,CAACQ,QAAJ,EAAhD,CACAjB,CAAC,CAAC,iBAAD,CAAD,CAAqBY,IAArB,GAA4B,CAA5B,EAA+BC,aAA/B,CAA+CJ,CAAG,CAACS,WAAJ,GAAoB,GAAnE,CACA,GAA8B,CAA1B,CAAAlB,CAAC,CAAC,aAAD,CAAD,CAAiBW,MAArB,CAAiC,CAC7BD,CAAU,CAAG,CAACV,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAAxC,CACAnB,CAAC,CAACoB,QAAD,CAAD,CAAYC,EAAZ,CAAe,QAAf,CAAyB,aAAzB,CAAwC,UAAW,CAC/C,GAAI,KAAKC,OAAT,CAAkB,CAEdpB,CAAG,CAACqB,WAAJ,CAAgB,CACZ,CAAC,IAAO,SAAR,CADY,CAEZ,CAAC,IAAO,8BAA8BjB,CAAtC,CAA4CkB,SAAS,CAAE,mBAAvD,CAFY,CAGZ,CAAC,IAAO,KAAR,CAHY,CAIZ,CAAC,IAAO,IAAR,CAJY,CAKZ,CAAC,IAAO,cAAR,CAAwBA,SAAS,CAAE,mBAAnC,CALY,CAAhB,EAMGC,IANH,CAMQ,SAASC,CAAT,CAAY,CAChBzB,CAAY,CAAC0B,OAAb,CAAqBD,CAAC,CAAC,CAAD,CAAtB,CAA2BA,CAAC,CAAC,CAAD,CAA5B,CAAiCA,CAAC,CAAC,CAAD,CAAlC,CAAuCA,CAAC,CAAC,CAAD,CAAxC,CACI,UAAY,CAER1B,CAAC,CAAC,qBAAD,CAAD,CAAyB,CAAzB,EAA4BmB,QAA5B,IACAnB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,IACAnB,CAAC,CAAC,kBAAD,CAAD,CAAsB,CAAtB,EAAyBmB,QAAzB,IACAnB,CAAC,CAAC,oBAAD,CAAD,CAAwB,CAAxB,EAA2BmB,QAA3B,IACAnB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,IACA,GAAI,CAACT,CAAL,CAAiB,CACbV,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,IACAnB,CAAC,CAAC,iBAAD,CAAD,CAAqB,CAArB,EAAwBmB,QAAxB,IACAnB,CAAC,CAAC,gBAAD,CAAD,CAAoB,CAApB,EAAuBmB,QAAvB,IACAnB,CAAC,CAAC,kBAAD,CAAD,CAAsB,CAAtB,EAAyBmB,QAAzB,IACAnB,CAAC,CAAC,iBAAD,CAAD,CAAqB,CAArB,EAAwBmB,QAAxB,GACH,CACD,GAAiC,CAA7B,CAAAnB,CAAC,CAAC,gBAAD,CAAD,CAAoBW,MAAxB,CAAoC,CAChCX,CAAC,CAAC,gBAAD,CAAD,CAAoB4B,IAApB,CAAyB,UAAzB,IACH,CACD,GAA4B,CAAxB,CAAA5B,CAAC,CAAC,WAAD,CAAD,CAAeW,MAAnB,CAA+B,CAC3BX,CAAC,CAAC,WAAD,CAAD,CAAe4B,IAAf,CAAoB,OAApB,IACH,CACD,GAAsC,CAAlC,CAAA5B,CAAC,CAAC,qBAAD,CAAD,CAAyBW,MAA7B,CAAyC,CACrCX,CAAC,CAAC,qBAAD,CAAD,CAAyB4B,IAAzB,CAA8B,UAA9B,KACA5B,CAAC,CAAC,qBAAD,CAAD,CAAyB6B,GAAzB,CAA6BH,CAAC,CAAC,CAAD,CAA9B,CACH,CACJ,CAzBL,CA0BI,UAAY,CAER1B,CAAC,CAAC,aAAD,CAAD,CAAiB4B,IAAjB,CAAsB,SAAtB,IACH,CA7BL,CA8BH,CArCD,CAsCH,CAxCD,IAwCO,CAEH5B,CAAC,CAAC,qBAAD,CAAD,CAAyB,CAAzB,EAA4BmB,QAA5B,IACAnB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,IACAnB,CAAC,CAAC,kBAAD,CAAD,CAAsB,CAAtB,EAAyBmB,QAAzB,IACAnB,CAAC,CAAC,oBAAD,CAAD,CAAwB,CAAxB,EAA2BmB,QAA3B,IACAnB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,IACA,GAAI,CAACT,CAAL,CAAiB,CACbV,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,IACAnB,CAAC,CAAC,iBAAD,CAAD,CAAqB,CAArB,EAAwBmB,QAAxB,IACAnB,CAAC,CAAC,gBAAD,CAAD,CAAoB,CAApB,EAAuBmB,QAAvB,IACAnB,CAAC,CAAC,kBAAD,CAAD,CAAsB,CAAtB,EAAyBmB,QAAzB,IACAnB,CAAC,CAAC,iBAAD,CAAD,CAAqB,CAArB,EAAwBmB,QAAxB,GACH,CACD,GAAiC,CAA7B,CAAAnB,CAAC,CAAC,gBAAD,CAAD,CAAoBW,MAAxB,CAAoC,CAChCX,CAAC,CAAC,gBAAD,CAAD,CAAoB4B,IAApB,CAAyB,UAAzB,IACH,CACD,GAA4B,CAAxB,CAAA5B,CAAC,CAAC,WAAD,CAAD,CAAeW,MAAnB,CAA+B,CAC3BX,CAAC,CAAC,WAAD,CAAD,CAAe4B,IAAf,CAAoB,OAApB,IACH,CACD,GAAsC,CAAlC,CAAA5B,CAAC,CAAC,qBAAD,CAAD,CAAyBW,MAA7B,CAAyC,CACrC,GAAI,CAACD,CAAL,CAAiB,CACbV,CAAC,CAAC,qBAAD,CAAD,CAAyB4B,IAAzB,CAA8B,UAA9B,IACH,CACD1B,CAAG,CAACqB,WAAJ,CAAgB,CACZ,CAAC,IAAO,uBAAR,CAAiCC,SAAS,CAAE,mBAA5C,CADY,CAEZ,CAAC,IAAO,gBAAR,CAA0BA,SAAS,CAAE,mBAArC,CAFY,CAAhB,EAGGC,IAHH,CAGQ,SAASC,CAAT,CAAY,CAChB,GAAiC,CAA7B,CAAA1B,CAAC,CAAC,gBAAD,CAAD,CAAoBW,MAAxB,CAAoC,CAEhCX,CAAC,CAAC,qBAAD,CAAD,CAAyB6B,GAAzB,CAA6BH,CAAC,CAAC,CAAD,CAA9B,CACH,CAHD,IAGO,CAEH1B,CAAC,CAAC,qBAAD,CAAD,CAAyB6B,GAAzB,CAA6BH,CAAC,CAAC,CAAD,CAA9B,CACH,CACJ,CAXD,CAYH,CACJ,CACJ,CA/ED,CAgFH,CACD,GAAiC,CAA7B,CAAA1B,CAAC,CAAC,gBAAD,CAAD,CAAoBW,MAAxB,CAAoC,CAChCX,CAAC,CAACoB,QAAD,CAAD,CAAYC,EAAZ,CAAe,QAAf,CAAyB,gBAAzB,CAA2C,UAAY,CACnD,GAAI,KAAKC,OAAT,CAAkB,CAEdtB,CAAC,CAAC,qBAAD,CAAD,CAAyB,CAAzB,EAA4BmB,QAA5B,IACAnB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,IACAnB,CAAC,CAAC,kBAAD,CAAD,CAAsB,CAAtB,EAAyBmB,QAAzB,IACAnB,CAAC,CAAC,oBAAD,CAAD,CAAwB,CAAxB,EAA2BmB,QAA3B,IACAnB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,GACH,CAPD,IAOO,CAEHnB,CAAC,CAAC,qBAAD,CAAD,CAAyB,CAAzB,EAA4BmB,QAA5B,IACAnB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,IACAnB,CAAC,CAAC,kBAAD,CAAD,CAAsB,CAAtB,EAAyBmB,QAAzB,IACAnB,CAAC,CAAC,oBAAD,CAAD,CAAwB,CAAxB,EAA2BmB,QAA3B,IACAnB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,EAA0BmB,QAA1B,GAEH,CACJ,CAjBD,CAkBH,CACJ,CAEM,CAGV,CAhIK,CAAN","sourcesContent":["define(['jquery', 'core/notification', 'core/str'], function ($, notification, str) {\n    var init = function(starttime, endtime, mode) {\n        var start = new Date(starttime * 1000);\n        var end = new Date(endtime * 1000);\n        var endenabled;\n        if ($('[name=minute_start]').length == 0) {\n            // No form present.\n            return;\n        }\n        $('[name=minute_start]').last()[0].selectedIndex = start.getMinutes();\n        $('[name=hour_start]').last()[0].selectedIndex = start.getHours();\n        $('[name=day_start]').last()[0].selectedIndex = start.getDate() - 1;\n        $('[name=month_start]').last()[0].selectedIndex = start.getMonth();\n        $('[name=year_start]').last()[0].selectedIndex = start.getFullYear() - 2000;\n\n        $('[name=minute_end]').last()[0].selectedIndex = end.getMinutes();\n        $('[name=hour_end]').last()[0].selectedIndex = end.getHours();\n        $('[name=day_end]').last()[0].selectedIndex = end.getDate() - 1;\n        $('[name=month_end]').last()[0].selectedIndex = end.getMonth();\n        $('[name=year_end]').last()[0].selectedIndex = end.getFullYear() - 2000;\n        if ($('#reactivate').length > 0) {\n            endenabled = !$('[name=minute_end]')[0].disabled;\n            $(document).on(\"change\", \"#reactivate\", function() {\n                if (this.checked) {\n                    // Ask for confirmation, then enable all fields related to re-invitation.\n                    str.get_strings([\n                        {'key': 'confirm'},\n                        {'key': 'content_confirm_reactivate_'+mode, component: 'block_evasys_sync'},\n                        {'key': 'yes'},\n                        {'key': 'no'},\n                        {'key': 'requestagain', component: 'block_evasys_sync'}\n                    ]).done(function(s) {\n                        notification.confirm(s[0], s[1], s[2], s[3],\n                            function () {\n                                // User pressed yes.\n                                $('[name=minute_start]')[0].disabled = false;\n                                $('[name=hour_start]')[0].disabled = false;\n                                $('[name=day_start]')[0].disabled = false;\n                                $('[name=month_start]')[0].disabled = false;\n                                $('[name=year_start]')[0].disabled = false;\n                                if (!endenabled) {\n                                    $('[name=minute_end]')[0].disabled = false;\n                                    $('[name=hour_end]')[0].disabled = false;\n                                    $('[name=day_end]')[0].disabled = false;\n                                    $('[name=month_end]')[0].disabled = false;\n                                    $('[name=year_end]')[0].disabled = false;\n                                }\n                                if ($('#direct_invite').length > 0) {\n                                    $('#direct_invite').prop('disabled', false);\n                                }\n                                if ($('#only_end').length > 0) {\n                                    $('#only_end').prop(\"value\", false);\n                                }\n                                if ($('#evasyssubmitbutton').length > 0) {\n                                    $('#evasyssubmitbutton').prop(\"disabled\", false);\n                                    $('#evasyssubmitbutton').val(s[4]);\n                                }\n                            },\n                            function () {\n                                // User pressed no.\n                                $('#reactivate').prop(\"checked\", false);\n                            });\n                    });\n                } else {\n                    // Disable all fields related to re-invitation.\n                    $('[name=minute_start]')[0].disabled = true;\n                    $('[name=hour_start]')[0].disabled = true;\n                    $('[name=day_start]')[0].disabled = true;\n                    $('[name=month_start]')[0].disabled = true;\n                    $('[name=year_start]')[0].disabled = true;\n                    if (!endenabled) {\n                        $('[name=minute_end]')[0].disabled = true;\n                        $('[name=hour_end]')[0].disabled = true;\n                        $('[name=day_end]')[0].disabled = true;\n                        $('[name=month_end]')[0].disabled = true;\n                        $('[name=year_end]')[0].disabled = true;\n                    }\n                    if ($('#direct_invite').length > 0) {\n                        $('#direct_invite').prop('disabled', true);\n                    }\n                    if ($('#only_end').length > 0) {\n                        $('#only_end').prop(\"value\", true);\n                    }\n                    if ($('#evasyssubmitbutton').length > 0) {\n                        if (!endenabled) {\n                            $('#evasyssubmitbutton').prop(\"disabled\", true);\n                        }\n                        str.get_strings([\n                            {'key': 'planorstartevaluation', component: 'block_evasys_sync'},\n                            {'key': 'invitestudents', component: 'block_evasys_sync'}\n                        ]).done(function(s) {\n                            if ($('#direct_invite').length > 0) {\n                                // User can start invitation herself.\n                                $('#evasyssubmitbutton').val(s[0]);\n                            } else {\n                                // User can only request evaluation from the coordinator.\n                                $('#evasyssubmitbutton').val(s[1]);\n                            }\n                        });\n                    }\n                }\n            });\n        }\n        if ($('#direct_invite').length > 0) {\n            $(document).on(\"change\", \"#direct_invite\", function () {\n                if (this.checked) {\n                    // Disable startdate as evaluation will start immediately.\n                    $('[name=minute_start]')[0].disabled = true;\n                    $('[name=hour_start]')[0].disabled = true;\n                    $('[name=day_start]')[0].disabled = true;\n                    $('[name=month_start]')[0].disabled = true;\n                    $('[name=year_start]')[0].disabled = true;\n                } else {\n                    // Allow user to set startdate.\n                    $('[name=minute_start]')[0].disabled = false;\n                    $('[name=hour_start]')[0].disabled = false;\n                    $('[name=day_start]')[0].disabled = false;\n                    $('[name=month_start]')[0].disabled = false;\n                    $('[name=year_start]')[0].disabled = false;\n\n                }\n            });\n        }\n    };\n\n    return {\n        init: init\n    };\n});"],"file":"initialize.min.js"}