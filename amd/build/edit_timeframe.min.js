define("block_evasys_sync/edit_timeframe",["jquery","core/modal_factory","core/templates","core/str","core/url"],(function($,ModalFactory,Templates,str,url){var ready=function(){4===this.readyState&&this.status>=200&&""!=this.responseText&&require(["core/notification"],(function(notification){str.get_string("save_failure","block_evasys_sync").done((function(s){notification.alert("Error",s,"OK")}))}))};return{initialize:function(startdates,enddates){var i=0;str.get_string("edit_time","block_evasys_sync").done((function(s){for(var dummy=!0;dummy;){var element=$("#timeediturl_"+i);if(element.length<=0){dummy=!1;break}element.on("click",(function(e){var clickedLink=$(e.currentTarget);ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:s,body:Templates.render("block_evasys_sync/edittime",{})}).then((function(modal){modal.getRoot().on("modal-save-cancel:save",(function(){var startmin,starthour,startday,startmonth,startyear,endmin,endhour,endday,endmonth,endyear,startdate,enddate,saveid=new URL(clickedLink.prop("href")).searchParams.get("id"),times={},settime=$("[name=use_standardtime]").last()[0].checked;settime&&(startmin=$("[name=minute_start]").last()[0].selectedIndex,starthour=$("[name=hour_start]").last()[0].selectedIndex,startday=$("[name=day_start]").last()[0].selectedIndex,startmonth=$("[name=month_start]").last()[0].selectedIndex,startyear=$("[name=year_start]").last()[0].selectedIndex+2e3,endmin=$("[name=minute_end]").last()[0].selectedIndex,endhour=$("[name=hour_end]").last()[0].selectedIndex,endday=$("[name=day_end]").last()[0].selectedIndex,endmonth=$("[name=month_end]").last()[0].selectedIndex,endyear=$("[name=year_end]").last()[0].selectedIndex+2e3,startdate=new Date(startyear,startmonth,startday+1,starthour,startmin),enddate=new Date(endyear,endmonth,endday+1,endhour,endmin),times={starttime:startdate.getTime()/1e3,endtime:enddate.getTime()/1e3}),times.category=saveid;var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=ready;var s=url.relativeUrl("/blocks/evasys_sync/alterstandardtime.php",times,!0);xhttp.open("GET",s),xhttp.send();var elementNo=clickedLink.prop("id").split("_")[1];startdates[elementNo]=times.starttime,enddates[elementNo]=times.endtime,settime?str.get_string("time_set","block_evasys_sync").done((function(s){document.getElementById("timehint_"+elementNo).innerHTML=s})):document.getElementById("timehint_"+elementNo).innerHTML=""})),modal.show(),require(["block_evasys_sync/initialize"],(function(timesetter){var elementNo=clickedLink.prop("id").split("_")[1];null===startdates[elementNo]||void 0===startdates[elementNo]?(startdates[elementNo]=Date.now()/1e3,enddates[elementNo]=Date.now()/1e3):$("[name=use_standardtime]").last()[0].checked=!0,timesetter.init(startdates[elementNo],enddates[elementNo])}))}))})),i++}}))}}}));

//# sourceMappingURL=edit_timeframe.min.js.map